# EdgeOne Pages 配置文件 - 修复版

name = "openlist-proxy-edgeone"
compatibility_date = "2024-01-15"

[build]
  command = "echo 'No build required'"
  publish = "public"

[build.upload]
  format = "modules"
  dir = "functions"
  main = "./functions/[[path]].js"

# 路由配置 - 确保监控端点可访问
[[routes]]
  pattern = "/_/*"
  methods = ["GET"]
  [routes.custom]
    cache = false

[[routes]]
  pattern = "/*"
  methods = ["GET", "POST", "PUT", "DELETE", "HEAD", "OPTIONS"]

# 基础头部配置
[[headers]]
  for = "/*"
  [headers.values]
    "X-Frame-Options" = "DENY"
    "X-Content-Type-Options" = "nosniff"
    "Access-Control-Allow-Origin" = "*"

# 监控端点无缓存
[[headers]]
  for = "/_/*"
  [headers.values]
    "Cache-Control" = "no-cache, no-store, must-revalidate"

[functions]
  timeout = 30

[log]
  level = "info"